<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>もふもふ</title>
  <link rel="stylesheet" href="/log.css">
  <link rel="stylesheet" href="/logDetail.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <style></style>
  <script src="/logDetail.js"></script>
</head>

<body>
  <div class="wrapper"> <!--wrapper : 전체 페이지를 감싸는 컨테이너-->
    <!-- Sidebar -->
    <nav class="sidebar"> <!--sidebar :  왼쪽 메뉴를 담당하는 사이드 바-->
      <div class="sidebar-header">
        <h2>프로필</h2>
      </div>
      <ul class="sidebar-menu">
        <li><a href="#">Dashboard</a></li>
      </ul>
    </nav>

    <!-- Content Wrapper --> <!--Content Wrapper : 메인 콘텐츠와 상단 네비게이션 바를 감싸는 컨테이너 -->
    <div class="content-wrapper">
      <!-- Navbar --> <!--Navbar: 페이지 상단에 위치한 검색창과 알림 프로필 등-->
      <nav class="navbar">
      <div class="search-container">
        <input type="text" placeholder="Search for..." class="search-bar">
        <button class="search-button">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div class="navbar-icons">
        <div class="icon-group">
          <div class="icon-item">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>알람
          </div>
          <div class="icon-item">
            <i class="fas fa-envelope"></i>
            <span class="notification-badge">7</span>메세지
          </div>
        </div>
        <div class="profile-group">
		  <span class="divider"></span> <img src="profile.jpg"
			alt="Profile Picture" class="profile-pic"> <span
			class="profile-name">간단한 프로필</span> <span>닉네임: <span
			th:text="${nickname}"></span></span>
		<button id="logoutButton" onclick="window.location.href='/user/logout'">로그아웃</button>
        </div>
      </div>
      </nav>

      <!-- Main Content --> <!--Main Content : 메인 콘텐츠 영역-->
      <div id="logDetailContainer">
        <!-- 상단으로 돌아가기 -->
        <div id="logDetailHeader">
		  <button id="backButton" onclick="location.href='/log/indexLog'">
		    <i class="fas fa-arrow-left"></i>
		  </button>
		<div id="menuButton">
		    <i class="fas fa-ellipsis-v"></i>
		    <ul id="menuDropdown" style="display: none; position: absolute; z-index: 100; background: #fff; border: 1px solid #ccc; padding: 10px; list-style: none;">
		        <li onclick="openEditPopup()">수정</li>
		        <li onclick="deleteLog()">삭제</li>
		    </ul>
		</div>
		</div>

        <!-- 일기 내용 -->
		<div id="logDetailContainer">
		    <p id="logAuthor"></p>
		    <p id="logTime"></p>
		    <div id="logContentContainer">
			    <div id="logContent" contenteditable="false"></div>
			    <textarea id="logEditContent" style="display: none;"></textarea>
			    <div id="logEditFileContainer" style="display: none; margin-top: 10px;">
			        <label for="logEditFileInput">첨부파일:</label>
			        <input type="file" id="logEditFileInput" multiple/>
			    </div>
			    <button id="saveLogButton" style="display: none;" onclick="saveLog()">저장</button>
			</div>
		    <div id="logImages"></div>
		</div>
		
		<!-- 글쓰기 팝업 (수정용으로 재활용) -->
		<div id="logPopupContainer" class="popup-container" style="display: none;">
		    <div class="popup">
		        <textarea id="logContentInput" rows="5" placeholder="내용을 입력하세요"></textarea>
		
		        <!-- 이미지 업로드 폼 -->
		        <form id="uploadForm" method="POST" enctype="multipart/form-data">
		            <input type="file" id="logImageInput" name="logFiles" multiple />
		            <div id="logFileListContainer">
		                <!-- 기존 파일 리스트가 여기에 렌더링됩니다 -->
		            </div>
		        </form>
		
		        <button id="logSubmitButton">저장</button>
		        <button id="logCloseButton">닫기</button>
		    </div>
		</div>
        <!-- 댓글 입력 -->
        <div id="commentSectionFixed">
		    <textarea id="commentInput" placeholder="댓글을 작성해보세요."></textarea>
		    <button id="submitComment">완료</button>
		</div>
		
		<!-- 댓글 템플릿 -->
		<template id="comment-template">
		  <div class="reply-item">
		    <div class="comment-header">
		      <div class="comment-author">
		        <img src="/path/to/profile.jpg" alt="프로필 사진" class="profile-image">
		        <div class="author-info">
		          <p class="author-name">익명</p>
		          <p class="comment-time">방금 전</p>
		        </div>
		      </div>
		      <!-- 수정/삭제 버튼 -->
		      <div class="comment-actions">
		        <button class="edit-button">수정</button>
		        <button class="delete-button">삭제</button>
		      </div>
		    </div>
		    <div class="comment-content">
		      <p>댓글 내용</p>
		    </div>
		    <div class="comment-footer">
		      <button class="reply-button">답글</button>
		      <span class="like">
		        <i class="fas fa-heart"></i> <span class="like-count">0</span>
		      </span>
		    </div>
		  </div>
		</template>


        <!-- 댓글 목록 -->
        <div id="commentList"></div>

		<!-- 이미지 갤러리 모달 -->
		<div id="imageGalleryModal" class="imageGalleryModal" style="display: none;">
		    <span class="close" id="closeModal">&times;</span>
		    <div class="modal-content">
		        <img id="galleryImage" src="" alt="Gallery Image" />
		        <span class="arrow left-arrow" id="prevImage">&#10094;</span>
		        <span class="arrow right-arrow" id="nextImage">&#10095;</span>
		    </div>
		</div>
      </div>
    </div>
  </div>
</body>
</html>
